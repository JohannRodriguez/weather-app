(()=>{"use strict";const e=e=>e.charAt(0).toUpperCase()+e.slice(1),t=e=>null===e?"":e,n=e=>e%1!=0?parseFloat(e.toFixed(2)):e,c=(e,t)=>e===t?"temp-switch":"temp-switch temp-click",a=e=>{e.forEach((e=>{e.classList.add("temp-click")}))},s=JSON.parse(localStorage.getItem("request"))||[];document.getElementById("submit-form").addEventListener("click",(c=>{c.preventDefault();const a=e(document.getElementById("city-name").value),s=document.getElementById("state-name").value.toLowerCase(),o=document.getElementById("temp-types").value;(async(t,c,a,s)=>{((t,c,a,s)=>{if(200===t.cod){const e=[((e,t,c,a)=>{const s=e.main.temp,i=s-273.15,o=9*i/5+32;return{city:t,state:c,kelvin:s,celcius:n(i),fahrenheit:n(o),pref:a,description:e.weather[0].description,icon:`http://openweathermap.org/img/wn/${e.weather[0].icon}@2x.png`}})(t,c,a,s),c,a,s];localStorage.setItem("request",JSON.stringify(e)),location.reload()}else i=t.message,document.getElementById("error").textContent="Error: "+e(i),document.querySelector(".error-msg").classList.remove("invisible");var i})(await(await fetch(t,{mode:"cors"}).catch(i)).json(),c,a,s)})(((e,t)=>{const n={root:"http://api.openweathermap.org/data/2.5/weather?q=",city:e,state:t,key:"&APPID=a462784b129e8666735d11a68b50dc6c"},{root:c,city:a,state:s,key:i}=n;return 0===a.length?`${c}${s}${i}`:0===s.length?`${c}${a}${i}`:`${c}${a},${s}${i}`})(t(a),t(s)),a,s,o)}));const i=e=>{new Response(JSON.stringify({cod:404,message:"City not found"}))};(t=>{const n=document.getElementById("page-content"),a=document.createDocumentFragment(),s=document.createElement("h1");var i,o;s.textContent=(i=t.city,0===(o=t.state).length?`The weather in ${i} is:`:0===i.length?`The weather in ${e(o)} is:`:`The weather in ${i}, ${e(o)} is:`);const r=document.createElement("span");r.id="temp",r.textContent=(e=>{switch(e.pref){case"1":return e.celcius+" °C";case"2":return e.fahrenheit+" °F";case"3":return e.kelvin+" °K";default:return"Not found"}})(t);const l=document.createElement("div");l.id="switch-type",l.classList="switch";const d=document.createElement("p");d.textContent=t.description;const m=document.createElement("img");m.src=t.icon;const p=document.createElement("span");p.textContent="°C",p.id="celcius",p.classList=c("1",t.pref),p.setAttribute("data-type","celcius");const h=document.createElement("span");h.textContent="°F",h.id="fahrenheit",h.classList=c("2",t.pref),h.classList.add("middle-temp"),h.setAttribute("data-type","fahrenheit");const u=document.createElement("span");u.textContent="°K",u.id="kelvin",u.setAttribute("data-type","kelvin"),u.classList=c("3",t.pref),a.appendChild(s),a.appendChild(d),a.appendChild(m),a.appendChild(r),l.appendChild(p),l.appendChild(h),l.appendChild(u),a.appendChild(l),n.appendChild(a)})(s[0]),(e=>{const t=document.querySelectorAll(".temp-switch");t.forEach((n=>{n.addEventListener("click",(()=>{const c=n.dataset.type,s=document.getElementById("temp");switch(c){case"celcius":s.textContent=e.celcius+" °C",a(t),n.classList.remove("temp-click");break;case"kelvin":s.textContent=e.kelvin+" °K",a(t),n.classList.remove("temp-click");break;case"fahrenheit":s.textContent=e.fahrenheit+" °F",a(t),n.classList.remove("temp-click");break;default:s.textContent="Not found"}}))}))})(s[0])})();