(()=>{const e=JSON.parse(localStorage.getItem("request"))||[],t=e=>e.charAt(0).toUpperCase()+e.slice(1),n=e=>null===e?"":e;document.getElementById("submit-form").addEventListener("click",(e=>{e.preventDefault();const c=t(document.getElementById("city-name").value),s=document.getElementById("state-name").value.toLowerCase(),i=document.getElementById("temp-types").value,o=((e,t)=>{const n={root:"http://api.openweathermap.org/data/2.5/weather?q=",city:e,state:t,key:"&APPID=a462784b129e8666735d11a68b50dc6c"},{root:a,city:c,state:s,key:i}=n;return 0===c.length?`${a}${s}${i}`:0===s.length?`${a}${c}${i}`:`${a}${c},${s}${i}`})(n(c),n(s));a(o,c,s,i)}));const a=async(e,t,n,a)=>{const s=await(await fetch(e,{mode:"cors"}).catch(c)).json();i(s,t,n,a)},c=e=>{new Response(JSON.stringify({cod:404,message:"City not found"}))},s=e=>e%1!=0?parseFloat(e.toFixed(2)):e,i=(e,n,a,c)=>{if(200===e.cod){const t=[o(e,n,a,c),n,a,c];localStorage.setItem("request",JSON.stringify(t)),location.reload()}else document.getElementById("error").textContent=t(e.message)},o=(e,t,n,a)=>{const c=e.main.temp,i=c-273.15,o=9*i/5+32;return{city:t,state:n,kelvin:c,celcius:s(i),fahrenheit:s(o),pref:a,description:e.weather[0].description,icon:`http://openweathermap.org/img/wn/${e.weather[0].icon}@2x.png`}},r=(e,n)=>0===n.length?`The weather in ${e} is:`:0===e.length?`The weather in ${t(n)} is:`:location.textContent=`The weather in ${e}, ${t(n)} is:`,d=(e,t)=>e===t?"temp-switch":"temp-switch temp-click";var l;(l=e).length>0&&(e=>{const t=document.getElementById("page-content"),n=document.createDocumentFragment(),a=document.createElement("h1");a.textContent=r(e.city,e.state);const c=document.createElement("span");c.id="temp",c.textContent=(e=>{switch(e.pref){case"1":return e.celcius+" °C";case"2":return e.fahrenheit+" °F";case"3":return e.kelvin+" °K"}})(e);const s=document.createElement("div");s.id="switch-type",s.classList="switch";const i=document.createElement("p");i.textContent=e.description;const o=document.createElement("img");o.src=e.icon;const l=document.createElement("span");l.textContent="°C",l.id="celcius",l.classList=d("1",e.pref),l.setAttribute("data-type","celcius");const p=document.createElement("span");p.textContent="°F",p.id="fahrenheit",p.classList=d("2",e.pref),p.classList.add("middle-temp"),p.setAttribute("data-type","fahrenheit");const m=document.createElement("span");m.textContent="°K",m.id="kelvin",m.setAttribute("data-type","kelvin"),m.classList=d("3",e.pref),n.appendChild(a),n.appendChild(i),n.appendChild(o),n.appendChild(c),s.appendChild(l),s.appendChild(p),s.appendChild(m),n.appendChild(s),t.appendChild(n)})(l[0])})();