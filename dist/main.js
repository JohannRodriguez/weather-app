(()=>{"use strict";const e=(e,t)=>e===t?"temp-switch":"temp-switch temp-click",t=(e,t)=>0===t.length?`The weather in ${e} is:`:0===e.length?`The weather in ${n(t)} is:`:location.textContent=`The weather in ${e}, ${n(t)} is:`,n=e=>e.charAt(0).toUpperCase()+e.slice(1),c=e=>{e.forEach((e=>{e.classList.add("temp-click")}))},a=e=>e.charAt(0).toUpperCase()+e.slice(1),s=e=>null===e?"":e,i=e=>e%1!=0?parseFloat(e.toFixed(2)):e,o=JSON.parse(localStorage.getItem("request"))||[];document.getElementById("submit-form").addEventListener("click",(e=>{e.preventDefault();const t=a(document.getElementById("city-name").value),n=document.getElementById("state-name").value.toLowerCase(),c=document.getElementById("temp-types").value,i=((e,t)=>{const n={root:"http://api.openweathermap.org/data/2.5/weather?q=",city:e,state:t,key:"&APPID=a462784b129e8666735d11a68b50dc6c"},{root:c,city:a,state:s,key:i}=n;return 0===a.length?`${c}${s}${i}`:0===s.length?`${c}${a}${i}`:`${c}${a},${s}${i}`})(s(t),s(n));r(i,t,n,c)}));const r=async(e,t,n,c)=>{const a=await(await fetch(e,{mode:"cors"}).catch(l)).json();d(a,t,n,c)},l=e=>{new Response(JSON.stringify({cod:404,message:"City not found"}))},d=(e,t,n,c)=>{if(200===e.cod){const a=[p(e,t,n,c),t,n,c];localStorage.setItem("request",JSON.stringify(a)),location.reload()}else document.getElementById("error").textContent=a(e.message)},p=(e,t,n,c)=>{const a=e.main.temp,s=a-273.15,o=9*s/5+32;return{city:t,state:n,kelvin:a,celcius:i(s),fahrenheit:i(o),pref:c,description:e.weather[0].description,icon:`http://openweathermap.org/img/wn/${e.weather[0].icon}@2x.png`}};(n=>{const c=document.getElementById("page-content"),a=document.createDocumentFragment(),s=document.createElement("h1");s.textContent=t(n.city,n.state);const i=document.createElement("span");i.id="temp",i.textContent=(e=>{switch(e.pref){case"1":return e.celcius+" °C";case"2":return e.fahrenheit+" °F";case"3":return e.kelvin+" °K"}})(n);const o=document.createElement("div");o.id="switch-type",o.classList="switch";const r=document.createElement("p");r.textContent=n.description;const l=document.createElement("img");l.src=n.icon;const d=document.createElement("span");d.textContent="°C",d.id="celcius",d.classList=e("1",n.pref),d.setAttribute("data-type","celcius");const p=document.createElement("span");p.textContent="°F",p.id="fahrenheit",p.classList=e("2",n.pref),p.classList.add("middle-temp"),p.setAttribute("data-type","fahrenheit");const m=document.createElement("span");m.textContent="°K",m.id="kelvin",m.setAttribute("data-type","kelvin"),m.classList=e("3",n.pref),a.appendChild(s),a.appendChild(r),a.appendChild(l),a.appendChild(i),o.appendChild(d),o.appendChild(p),o.appendChild(m),a.appendChild(o),c.appendChild(a)})(o[0]),(e=>{const t=document.querySelectorAll(".temp-switch");t.forEach((n=>{n.addEventListener("click",(()=>{const a=n.dataset.type,s=document.getElementById("temp");switch(a){case"celcius":s.textContent=e.celcius+" C°",c(t),n.classList.remove("temp-click");break;case"kelvin":s.textContent=e.kelvin+" K°",c(t),n.classList.remove("temp-click");break;case"fahrenheit":s.textContent=e.fahrenheit+" F°",c(t),n.classList.remove("temp-click")}}))}))})(o[0])})();